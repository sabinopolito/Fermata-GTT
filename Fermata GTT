<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elenco Fermate Pullman</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container mt-5">
        <h1 class="text-center">Elenco Fermate Pullman</h1>

        <!-- Form per inserire il numero della fermata -->
        <form id="stopForm" class="my-4">
            <div class="mb-3">
                <label for="stopNumber" class="form-label">Inserisci il numero della fermata:</label>
                <input type="number" id="stopNumber" class="form-control" placeholder="Es. 1, 2, 3..." required>
            </div>
            <button type="button" id="showStops" class="btn btn-primary">Mostra passaggi</button>
        </form>

        <!-- Elenco passaggi -->
        <div id="stopList" class="mt-4" style="display: none;">
            <h2 class="h5">Elenco Passaggi:</h2>
            <ul id="stopItems" class="list-group"></ul>
        </div>
    </div>

    <!-- Bootstrap JS and dependencies -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>



// URL dell'API per le fermate (modifica se necessario)
const URL = "https://gpa.madbob.org/query.php?stop=";

// Funzione per aggiungere un passaggio alla lista
function aggiungiPassaggio(linea, orario) {
    const stopItems = document.getElementById("stopItems");

    // Crea un nuovo elemento della lista
    const li = document.createElement("li");
    li.className = "list-group-item";
    li.textContent = `Linea: ${linea} - Orario: ${orario}`;

    // Aggiungi l'elemento alla lista
    stopItems.appendChild(li);
}

// Funzione per mostrare i passaggi
function mostra(lista) {
    const stopItems = document.getElementById("stopItems");

    // Svuota la lista per evitare duplicati
    stopItems.innerHTML = "";

    // Aggiungi ogni passaggio dalla lista
    lista.forEach(passaggio => {
        aggiungiPassaggio(passaggio.line, passaggio.hour);
    });

    // Mostra la sezione della lista
    document.getElementById("stopList").style.display = "block";
}

// Funzione per cercare una fermata
function cercafermata() {
    const stopNumber = document.getElementById("stopNumber").value;

    // Controlla se il numero Ã¨ valido
    if (!stopNumber) {
        alert("Per favore, inserisci un numero di fermata valido.");
        return;
    }

    // Effettua la richiesta fetch all'API
    fetch(URL + stopNumber)
        .then(response => {
            if (!response.ok) {
                throw new Error("Errore nella richiesta al server");
            }
            return response.json();
        })
        .then(data => mostra(data))
        .catch(error => {
            alert("Errore: " + error.message);
        });
}

// Aggiungi l'evento click al bottone
document.getElementById("showStops").addEventListener("click", cercafermata);



/* Stile generale */
body {
    font-family: Arial, sans-serif;
    background-color: #f8f9fa; /* Grigio chiaro */
    color: #343a40; /* Testo scuro */
}

/* Stile del titolo principale */
h1 {
    font-size: 2.5rem;
    color: #007bff; /* Blu Bootstrap */
    margin-bottom: 1rem;
}

/* Contenitore delle fermate */
#stopList {
    background-color: #ffffff;
    padding: 1.5rem;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Raggruppamento per linea */
.line-group {
    display: flex;
    align-items: center;
    margin-bottom: 1rem;
}

/* Stile del cerchio giallo per il numero della linea */
.line-number {
    background-color: #ffd700; /* Giallo */
    color: #000000; /* Nero */
    font-size: 1.5rem;
    font-weight: bold;
    width: 50px;
    height: 50px;
    line-height: 50px;
    text-align: center;
    border-radius: 50%;
    border: 2px solid #000000; /* Bordo nero */
    margin-right: 1rem;
}

/* Elenco degli orari */
.line-times {
    font-size: 1rem;
    color: #343a40;
}
